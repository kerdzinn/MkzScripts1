-- Mkz Loading (Step 1: force-to-front + hide other UIs) -- Executor friendly
-- Cole em um executor (KRNL / Delta / Synapse etc.)

local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local CoreGui = game:GetService("CoreGui")

local plr = Players.LocalPlayer
if not plr then return end
local playerGui = plr:WaitForChild("PlayerGui")

-- === cria a GUI Mkz (simples, apenas pra testar layering) ===
local gui = Instance.new("ScreenGui")
gui.Name = "MkzLoad_Executor"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.DisplayOrder = 9999 -- força prioridade entre ScreenGuis

-- fundo
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1,0,1,0)
bg.BackgroundColor3 = Color3.fromRGB(10,10,12)
bg.Parent = gui
bg.ZIndex = 99999

-- título
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.3,0,0.08,0)
title.Position = UDim2.new(0.5,0,0.33,0)
title.AnchorPoint = Vector2.new(0.5,0.5)
title.BackgroundTransparency = 1
title.Text = "Mkz"
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(0,160,255)
title.ZIndex = 99999
title.Parent = gui

-- barra moldura (cinza)
local barFrame = Instance.new("Frame")
barFrame.Size = UDim2.new(0.42,0,0.045,0)
barFrame.Position = UDim2.new(0.5,0,0.55,0)
barFrame.AnchorPoint = Vector2.new(0.5,0.5)
barFrame.BackgroundColor3 = Color3.fromRGB(70,70,78)
barFrame.ZIndex = 99999
barFrame.Parent = gui
local corner = Instance.new("UICorner"); corner.CornerRadius = UDim.new(0,12); corner.Parent = barFrame

local fill = Instance.new("Frame")
fill.Size = UDim2.new(0,0,1,0)
fill.BackgroundColor3 = Color3.fromRGB(0,120,255)
fill.ZIndex = 99999
fill.Parent = barFrame
local fillCorner = Instance.new("UICorner"); fillCorner.CornerRadius = UDim.new(0,12); fillCorner.Parent = fill

local percent = Instance.new("TextLabel")
percent.BackgroundTransparency = 1
percent.Position = UDim2.new(0.5,0,0.62,0)
percent.AnchorPoint = Vector2.new(0.5,0)
percent.Text = "0%"
percent.Font = Enum.Font.GothamSemibold
percent.TextScaled = true
percent.TextColor3 = Color3.fromRGB(200,200,210)
percent.ZIndex = 99999
percent.Parent = gui

-- === tenta parentar em CoreGui (método mais confiável para ficar na frente) ===
local parentedToCore = false
local ok, err = pcall(function()
	gui.Parent = CoreGui
end)
if ok then
	parentedToCore = true
else
	-- fallback: parenta ao PlayerGui
	gui.Parent = playerGui
	parentedToCore = false
end

-- === esconda outras ScreenGuis do PlayerGui (temporariamente) ===
local hiddenFolder = Instance.new("Folder")
hiddenFolder.Name = "MkzHiddenTemp"
hiddenFolder.Parent = playerGui

local movedScreens = {}
for _,child in ipairs(playerGui:GetChildren()) do
	if child:IsA("ScreenGui") and child ~= gui and child.Name ~= "MkzHiddenTemp" then
		pcall(function()
			table.insert(movedScreens, child)
			child.Parent = hiddenFolder
		end)
	end
end

-- === tenta desabilitar CoreGui types (melhora em alguns casos) ===
local disabledCore = {}
for _, coreType in ipairs(Enum.CoreGuiType:GetEnumItems()) do
	pcall(function()
		StarterGui:SetCoreGuiEnabled(coreType, false)
		table.insert(disabledCore, coreType)
	end)
end

-- === função de restauração (chame getgenv().MkzCleanup() se quiser reverter manualmente) ===
local function restoreAll()
	-- reabilita CoreGui types que desabilitamos
	for _, coreType in ipairs(disabledCore) do
		pcall(function()
			StarterGui:SetCoreGuiEnabled(coreType, true)
		end)
	end
	-- reparenta ScreenGuis de volta
	if hiddenFolder and hiddenFolder.Parent then
		for _, obj in ipairs(hiddenFolder:GetChildren()) do
			pcall(function() obj.Parent = playerGui end)
		end
		pcall(function() hiddenFolder:Destroy() end)
	end
	-- remove nossa GUI caso ainda exista
	pcall(function()
		if gui and gui.Parent then
			gui:Destroy()
		end
	end)
end

-- expõe cleanup globalmente (útil se algo travar)
getgenv().MkzCleanup = restoreAll

-- instrução útil para debug:
print(("MkzLoad: parentedToCore=%s (se true => em CoreGui). Use getgenv().MkzCleanup() para restaurar."):format(tostring(parentedToCore)))

-- OBS: este script foca no passo 1 (front + hide). Próximos passos:
--  - passo 2: deixar o preenchimento da barra FLUIDO (tween / heartbeat smoothing)
--  - passo 3: remover/ajustar qualquer artefato (a faixa branca que você comentou)
-- Me diga quando quiser que eu já implemente o passo 2.
