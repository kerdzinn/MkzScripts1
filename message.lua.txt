-- Mkz Loading (Completo: force-to-front + barra animada + frases alternadas)
-- Cole em um executor (KRNL / Delta / Synapse etc.)

local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local plr = Players.LocalPlayer
if not plr then return end
local playerGui = plr:WaitForChild("PlayerGui")

-- === cria a GUI Mkz ===
local gui = Instance.new("ScreenGui")
gui.Name = "MkzLoad_Executor"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.DisplayOrder = 9999

-- fundo PRETO SÓLIDO COM GRID ANIMADO
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1,0,1,0)
bg.BackgroundColor3 = Color3.fromRGB(0,0,0) -- PRETO TOTAL
bg.Parent = gui
bg.ZIndex = 1

-- GRID ANIMADO (linhas sutis se movendo)
local gridContainer = Instance.new("Frame")
gridContainer.Size = UDim2.new(1,0,1,0)
gridContainer.BackgroundTransparency = 1
gridContainer.ZIndex = 1
gridContainer.Parent = bg

-- linhas verticais
for i = 1, 8 do
	local line = Instance.new("Frame")
	line.Size = UDim2.new(0, 1, 1, 0)
	line.Position = UDim2.new(i/9, 0, 0, 0)
	line.BackgroundColor3 = Color3.fromRGB(0,120,255)
	line.BackgroundTransparency = 0.95
	line.BorderSizePixel = 0
	line.ZIndex = 1
	line.Parent = gridContainer
	
	-- anima as linhas
	task.spawn(function()
		while line and line.Parent do
			TweenService:Create(line, TweenInfo.new(4, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
				BackgroundTransparency = 0.98
			}):Play()
			task.wait(4)
		end
	end)
end

-- linhas horizontais
for i = 1, 6 do
	local line = Instance.new("Frame")
	line.Size = UDim2.new(1, 0, 0, 1)
	line.Position = UDim2.new(0, 0, i/7, 0)
	line.BackgroundColor3 = Color3.fromRGB(0,120,255)
	line.BackgroundTransparency = 0.95
	line.BorderSizePixel = 0
	line.ZIndex = 1
	line.Parent = gridContainer
	
	-- anima as linhas
	task.spawn(function()
		while line and line.Parent do
			TweenService:Create(line, TweenInfo.new(4, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
				BackgroundTransparency = 0.98
			}):Play()
			task.wait(4)
		end
	end)
end

-- PARTÍCULAS FLUTUANTES
local particlesFolder = Instance.new("Folder")
particlesFolder.Name = "Particles"
particlesFolder.Parent = bg

for i = 1, 15 do
	local particle = Instance.new("Frame")
	particle.Size = UDim2.new(0, math.random(2,5), 0, math.random(2,5))
	particle.Position = UDim2.new(math.random(0,100)/100, 0, math.random(0,100)/100, 0)
	particle.BackgroundColor3 = Color3.fromRGB(0,160,255)
	particle.BackgroundTransparency = math.random(50,80)/100
	particle.BorderSizePixel = 0
	particle.ZIndex = 2
	particle.Parent = particlesFolder
	
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(1,0)
	corner.Parent = particle
	
	-- anima partícula
	task.spawn(function()
		while particle and particle.Parent do
			local randomTime = math.random(30,60)/10
			local randomY = math.random(-20,20)/100
			TweenService:Create(particle, TweenInfo.new(randomTime, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
				Position = particle.Position + UDim2.new(0, 0, randomY, 0),
				BackgroundTransparency = math.random(30,90)/100
			}):Play()
			task.wait(randomTime)
		end
	end)
end

-- título GIGANTE COM SOMBRA E GRADIENTE
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.8,0,0.25,0)
title.Position = UDim2.new(0.5,0,0.35,0) -- MAIS CENTRALIZADO (antes era 0.2)
title.AnchorPoint = Vector2.new(0.5,0.5)
title.BackgroundTransparency = 1
title.Text = "Mkz"
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(0,160,255) -- azul base
title.TextStrokeTransparency = 0.5 -- contorno suave
title.TextStrokeColor3 = Color3.fromRGB(0,80,180) -- contorno azul escuro
title.ZIndex = 2
title.Parent = bg

-- gradiente no título
local titleGradient = Instance.new("UIGradient")
titleGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(100,200,255)), -- azul claro no topo
	ColorSequenceKeypoint.new(1, Color3.fromRGB(0,120,255)) -- azul escuro embaixo
}
titleGradient.Rotation = 90
titleGradient.Parent = title

-- EFEITO PULSAR NO TÍTULO
task.spawn(function()
	while title and title.Parent do
		TweenService:Create(title, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {
			Size = UDim2.new(0.82, 0, 0.26, 0)
		}):Play()
		task.wait(2)
	end
end)

-- FRASES ALTERNADAS COM SOMBRA
local phraseLabel = Instance.new("TextLabel")
phraseLabel.Size = UDim2.new(0.7,0,0.06,0)
phraseLabel.Position = UDim2.new(0.5,0,0.58,0) -- ajustado para ficar proporcional
phraseLabel.AnchorPoint = Vector2.new(0.5,0.5)
phraseLabel.BackgroundTransparency = 1
phraseLabel.Text = "Loading the script, wait a minute."
phraseLabel.Font = Enum.Font.Gotham
phraseLabel.TextScaled = true
phraseLabel.TextColor3 = Color3.fromRGB(255,255,255)
phraseLabel.TextTransparency = 0
phraseLabel.TextStrokeTransparency = 0.8 -- sombra leve
phraseLabel.TextStrokeColor3 = Color3.fromRGB(0,0,0)
phraseLabel.ZIndex = 3
phraseLabel.Parent = bg

-- barra moldura (cinza) COM SOMBRA
local barFrame = Instance.new("Frame")
barFrame.Size = UDim2.new(0.5,0,0.05,0)
barFrame.Position = UDim2.new(0.5,0,0.68,0) -- ajustado
barFrame.AnchorPoint = Vector2.new(0.5,0.5)
barFrame.BackgroundColor3 = Color3.fromRGB(70,70,78)
barFrame.ZIndex = 3
barFrame.Parent = bg

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0,12)
corner.Parent = barFrame

-- sombra na barra
local barShadow = Instance.new("UIStroke")
barShadow.Color = Color3.fromRGB(0,0,0)
barShadow.Thickness = 3
barShadow.Transparency = 0.7
barShadow.Parent = barFrame

-- barra de preenchimento (azul) COM GRADIENTE E BRILHO
local fill = Instance.new("Frame")
fill.Size = UDim2.new(0,0,1,0)
fill.BackgroundColor3 = Color3.fromRGB(0,120,255)
fill.ZIndex = 4
fill.BorderSizePixel = 0
fill.Parent = barFrame

local fillCorner = Instance.new("UICorner")
fillCorner.CornerRadius = UDim.new(0,12)
fillCorner.Parent = fill

-- gradiente na barra azul (efeito brilhante)
local fillGradient = Instance.new("UIGradient")
fillGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(50,180,255)), -- azul claro
	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,140,255)), -- azul médio
	ColorSequenceKeypoint.new(1, Color3.fromRGB(0,100,200)) -- azul escuro
}
fillGradient.Rotation = 90
fillGradient.Parent = fill

-- brilho na barra (efeito de luz)
local fillGlow = Instance.new("UIStroke")
fillGlow.Color = Color3.fromRGB(100,200,255)
fillGlow.Thickness = 2
fillGlow.Transparency = 0.5
fillGlow.Parent = fill

-- BRILHO QUE PERCORRE A BARRA
local shine = Instance.new("Frame")
shine.Size = UDim2.new(0.15, 0, 1, 0)
shine.Position = UDim2.new(-0.15, 0, 0, 0)
shine.BackgroundColor3 = Color3.fromRGB(255,255,255)
shine.BackgroundTransparency = 0.7
shine.BorderSizePixel = 0
shine.ZIndex = 5
shine.Parent = fill

local shineCorner = Instance.new("UICorner")
shineCorner.CornerRadius = UDim.new(0, 12)
shineCorner.Parent = shine

local shineGradient = Instance.new("UIGradient")
shineGradient.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 1),
	NumberSequenceKeypoint.new(0.5, 0.3),
	NumberSequenceKeypoint.new(1, 1)
}
shineGradient.Parent = shine

task.spawn(function()
	while shine and shine.Parent do
		TweenService:Create(shine, TweenInfo.new(2.5, Enum.EasingStyle.Linear), {
			Position = UDim2.new(1, 0, 0, 0)
		}):Play()
		task.wait(2.5)
		shine.Position = UDim2.new(-0.15, 0, 0, 0)
		task.wait(1)
	end
end)

-- ONDAS ANIMADAS NA BARRA (shimmer)
local shimmer = Instance.new("UIGradient")
shimmer.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0, 0.8),
	NumberSequenceKeypoint.new(0.5, 0),
	NumberSequenceKeypoint.new(1, 0.8)
}
shimmer.Offset = Vector2.new(-1, 0)
shimmer.Parent = fill

task.spawn(function()
	while shimmer and shimmer.Parent do
		TweenService:Create(shimmer, TweenInfo.new(3, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1, true), {
			Offset = Vector2.new(1, 0)
		}):Play()
		task.wait(3)
	end
end)

-- texto de porcentagem COM SOMBRA
local percent = Instance.new("TextLabel")
percent.Size = UDim2.new(0.15,0,0.05,0)
percent.BackgroundTransparency = 1
percent.Position = UDim2.new(0.5,0,0.76,0) -- ajustado
percent.AnchorPoint = Vector2.new(0.5,0.5)
percent.Text = "0%"
percent.Font = Enum.Font.GothamSemibold
percent.TextScaled = true
percent.TextColor3 = Color3.fromRGB(200,200,210)
percent.TextStrokeTransparency = 0.7
percent.TextStrokeColor3 = Color3.fromRGB(0,0,0)
percent.ZIndex = 3
percent.Parent = bg

-- === parenta em CoreGui ou PlayerGui ===
local parentedToCore = false
local ok, err = pcall(function()
	gui.Parent = CoreGui
end)
if ok then
	parentedToCore = true
else
	gui.Parent = playerGui
	parentedToCore = false
end

-- === esconde outras ScreenGuis ===
local hiddenFolder = Instance.new("Folder")
hiddenFolder.Name = "MkzHiddenTemp"
hiddenFolder.Parent = playerGui

local movedScreens = {}
for _,child in ipairs(playerGui:GetChildren()) do
	if child:IsA("ScreenGui") and child ~= gui and child.Name ~= "MkzHiddenTemp" then
		pcall(function()
			table.insert(movedScreens, child)
			child.Parent = hiddenFolder
		end)
	end
end

-- === desabilita CoreGui types ===
local disabledCore = {}
for _, coreType in ipairs(Enum.CoreGuiType:GetEnumItems()) do
	pcall(function()
		StarterGui:SetCoreGuiEnabled(coreType, false)
		table.insert(disabledCore, coreType)
	end)
end

-- === SISTEMA DE FRASES ALTERNADAS COM FADE ===
local phrases = {
	"Loading the script, wait a minute.",
	"If you see any script like this one, maybe its fake!"
}
local currentPhraseIndex = 1
local phraseActive = true

-- Loop de animação das frases
task.spawn(function()
	while phraseActive do
		-- adiciona pontinhos animados
		local dots = ""
		for dotCount = 1, 3 do
			phraseLabel.Text = phrases[currentPhraseIndex] .. dots
			dots = dots .. "."
			task.wait(0.4)
		end
		task.wait(0.5)
		
		-- Fade OUT
		local tweenOut = TweenService:Create(
			phraseLabel, 
			TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
			{TextTransparency = 1, TextStrokeTransparency = 1}
		)
		tweenOut:Play()
		tweenOut.Completed:Wait()
		
		-- Troca a frase
		currentPhraseIndex = currentPhraseIndex % #phrases + 1
		phraseLabel.Text = phrases[currentPhraseIndex]
		
		-- Fade IN
		local tweenIn = TweenService:Create(
			phraseLabel,
			TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.In),
			{TextTransparency = 0, TextStrokeTransparency = 0.8}
		)
		tweenIn:Play()
		tweenIn.Completed:Wait()
		
		task.wait(2)
	end
end)

-- === ANIMAÇÃO DA BARRA (110 SEGUNDOS FLUIDA) ===
local loadingActive = true
local startTime = tick()
local duration = 110

local function updateBar()
	local elapsed = tick() - startTime
	local progress = math.clamp(elapsed / duration, 0, 1)
	
	fill.Size = UDim2.new(progress, 0, 1, 0)
	percent.Text = string.format("%d%%", math.floor(progress * 100))
	
	return progress < 1
end

local connection = RunService.Heartbeat:Connect(function()
	if not loadingActive then return end
	
	local stillLoading = updateBar()
	
	if not stillLoading then
		loadingActive = false
		task.wait(0.5)
		restoreAll()
	end
end)

-- === RESTAURAÇÃO ===
function restoreAll()
	loadingActive = false
	phraseActive = false
	if connection then connection:Disconnect() end
	
	for _, coreType in ipairs(disabledCore) do
		pcall(function()
			StarterGui:SetCoreGuiEnabled(coreType, true)
		end)
	end
	
	if hiddenFolder and hiddenFolder.Parent then
		for _, obj in ipairs(hiddenFolder:GetChildren()) do
			pcall(function() obj.Parent = playerGui end)
		end
		pcall(function() hiddenFolder:Destroy() end)
	end
	
	pcall(function()
		if gui and gui.Parent then
			gui:Destroy()
		end
	end)
end

getgenv().MkzCleanup = restoreAll

print("MkzLoad: Ativo com efeitos visuais! 110 segundos")
print("Use getgenv().MkzCleanup() para fechar")
